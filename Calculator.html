<!DOCTYPE html>

<head>
    <title>계산기</title>
    <style>
        .outline {
            margin: 20px;
            background-color: bisque;
            width: 300px;
            align-items: center;
        }

        .resultpad {
            background-color:rgb(238, 221, 144);
            font-size: 30px;
            border: 3px solid gray;
            text-align: center;
        }

        .numberpad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            font-size: 30px;
            font-weight: bold;
            border: 3px solid gray;
        }

        .number {
            margin: 0 auto;
            cursor: pointer;
        }

        .operator {
            margin: 0 auto;
            cursor: pointer;
        }

        .result {
            margin: 0 auto;
            cursor: pointer;
        }

        .clear {
            margin: 0 auto;
            cursor: pointer;
        }
    </style>

</head>

<body>
    <div class="outline">

        <!--계산기 결과값창-->
        <div class="resultpad" id="result">0</div>

        <!--계산기 패드 16개 버튼-->
        <div class="numberpad">
            <div class="number" onclick="handleNumberClick(1)">1</div>
            <div class="number" onclick="handleNumberClick(2)">2</div>
            <div class="number" onclick="handleNumberClick(3)">3</div>
            <div class="operator" onclick="handleOperatorClick('+')"><span>+</span></div>
            <div class="number" onclick="handleNumberClick(4)">4</div>
            <div class="number" onclick="handleNumberClick(5)">5</div>
            <div class="number" onclick="handleNumberClick(6)">6</div>
            <div class="operator" onclick="handleOperatorClick('-')"><span>-</span></div>
            <div class="number" onclick="handleNumberClick(7)">7</div>
            <div class="number" onclick="handleNumberClick(8)">8</div>
            <div class="number" onclick="handleNumberClick(9)">9</div>
            <div class="operator" onclick="handleOperatorClick('*')"><span>*</span></div>
            <div class="number" onclick="handleNumberClick(0)">0</div>
            <div class="clear" onclick="handleClear()"><span>AC</span></div>
            <div class="result" onclick="handleResultClick()"><span>=</span></div>
            <div class="operator" onclick="handleOperatorClick('/')"><span>/</span></div>
        </div>
    </div>

<script>
const resultPad = document.querySelector(".resultpad"); // 결과값 표시창 선택
const numberButtons = document.querySelectorAll(".number"); // 숫자 버튼 선택
const operatorButtons = document.querySelectorAll(".operator"); // 연산자 버튼 선택
const clearButton = document.querySelector(".clear"); // AC 버튼 선택
const resultButton = document.querySelector(".result"); // = 버튼 선택

let currentNumber = ""; // 현재 누른 숫자를 저장하는 변수
let currentOperator = ""; // 현재 누른 연산자를 저장하는 변수
let previousNumber = ""; // 이전에 누른 숫자를 저장하는 변수
let shouldResetResultPad = false; // 결과값 창을 초기화해야 하는지 여부를 저장하는 변수

// 숫자 버튼에 이벤트 리스너 등록
numberButtons.forEach(button => {
  button.addEventListener("click", () => {
    if (shouldResetResultPad) {
      resultPad.textContent = "";
      shouldResetResultPad = false;
    }
    currentNumber += button.textContent;
    resultPad.textContent = currentNumber;
  });
});

// 연산자 버튼에 이벤트 리스너 등록
operatorButtons.forEach(button => {
  button.addEventListener("click", () => {
    if (currentNumber) {
      if (previousNumber && currentOperator) {
        const result = calculateResult(previousNumber, currentNumber, currentOperator);
        resultPad.textContent = result;
        previousNumber = result;
      } else {
        previousNumber = currentNumber;
      }
      currentNumber = "";
      currentOperator = button.textContent;
      shouldResetResultPad = true;
    }
  });
});

// = 버튼에 이벤트 리스너 등록
resultButton.addEventListener("click", () => {
  if (currentNumber && currentOperator) {
    const result = calculateResult(previousNumber, currentNumber, currentOperator);
    resultPad.textContent = result;
    previousNumber = "";
    currentNumber = result;
    currentOperator = "";
    shouldResetResultPad = true;
  }
});

// AC 버튼에 이벤트 리스너 등록
clearButton.addEventListener("click", () => {
  currentNumber = "";
  currentOperator = "";
  previousNumber = "";
  resultPad.textContent = "0";
  shouldResetResultPad = false;
});

// 계산 함수 정의
function calculateResult(num1, num2, operator) {
  num1 = parseFloat(num1);
  num2 = parseFloat(num2);
  switch (operator) {
    case "+":
      return num1 + num2;
    case "-":
      return num1 - num2;
    case "*":
      return num1 * num2;
    case "/":
      return num1 / num2;
    default:
      return "";
  }
}

</script>
